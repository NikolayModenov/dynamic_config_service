# dynamic_config_service

## Автор

1. Николай Моденов  
   - Аккаунт GitHub: [NikolayModenov](https://github.com/NikolayModenov)

## Описание

Сервис для динамического изменения конфигурационных файлов обслуживаемых приложений и сохранения истории внесённых изменений.

Возможности:
- Получить конфигурационный файл, с применением всех изменений
- Получить список всех изменений применённых к конфигурационному файлу
- добавить новое изменение конфигурационного файла
- удалить или исправить существующее изменение конфигурационного файла
- получить историю добавление, изменения, удаления изменений конфигурационного файла

### Техническое описание

Проект реализован при помощи FastAPI. Описание проекта хранится в yaml формате, в папке projects и состоит из таких характеристик:
- имя проекта
- название proto-файла, в котором описаны поля конфигурационного файла
- название yaml-файла, в котором хранятся значения конфигурационного файла по умолчанию
- список ярусов, на которых развёрнуто обслуживаемое приложение

### Локальный запуск проекта

1. Склонируйте проект на свой локальный компьютер. 

-```git clone git@github.com:NikolayModenov/dynamic_config_service.git```

2. Перейдите в директорию с проектом dynamic_config_service.

- ```cd dynamic_config_service/```

3. Создайте виртуальное окружение и подключитель к нему.

- ```python -m venv venv``` - создание окружения
- ```source venv/Scripts/activate``` - подключение к созданному окружению

4. Создайте в корневой директории проекта файл .env и внесите в него переменные:

- DB_USER=(имя пользователя базы данных postgres)
- DB_PASS=(пароль базы данных postgres)
- DB_HOST=(название хоста)
- DB_PORT=(порт сервера для подключения базы данных postgres)
- DB_NAME=(название базы данных postgres)

5. Создайте базу данных postgres, согласно параметрам, занесённым в файл .env.

6. Запустите сервер сервиса:

- ```alembic upgrade head``` - применить миграции
- ```fastapi dev main.py``` - локальный запуск сервера

### Список приложений используемых для разработки проекта

Проект реализован на FastAPI.

Рабочая база данных - PostgreSQL; база данных для тестирования - SQLite.

Модели базы банных написаны при помощи SQLAlchemy, для применения миграций применяется Alembic.

Тестирование проводится при помощи Pytest.